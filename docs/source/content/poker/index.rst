***************
Poker
***************

Присоединение к столу
====================================

Игрок делает запрос на "присоединение к столу" и указывает количество фишек, с которыми садится.

.. literalinclude:: code/table_join.json

После того, как второй игрок садится, сервер делает отсчёт в 5 секунд и запускает игру.

Старт игры
====================================

В центрифугу прилетит ответ от сервера о начале игры:

**Ответ от сервера:**

.. literalinclude:: code/game_start.json

Ход игрока
====================================

Каждый игрок делает запрос "ход текущего игрока".

**Запрос к серверу:**

.. literalinclude:: code/game_move_req.json

**Ответ от сервера:**

.. literalinclude:: code/game_move_ans.json

    

Все игроки ходят по кругу.

Если игрок сбросил карты ``flop``, то в ответе от сервера в ``data.players`` его уже не будет. Информация по нему будет только в инфе о ходе предыдущего игрока ``data.game.prevMove``.

Когда последний игрок сделает ход - новый этап игры:

    * выкладываются новые карты на стол (data.board.cards)
    * фишки текущего этапа ``data.bank.current`` добавляются в общий банк ``data.bank.total``
    * задаётся флаг о смене этапа игры (data.game.isChangedStage)

Если в ответе есть ``data.game.isFinish``, то данный ход был последним.

Конец игры
====================================

Сразу после последнего хода в центрифугу прилетит сообщение о завершении игры с результатами.

**Ответ от сервера:**

.. literalinclude:: code/game_end.json

