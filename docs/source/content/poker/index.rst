***************
Poker
***************

Присоединение к столу
====================================

Игрок делает запрос на "присоединение к столу" и указывает количество фишек, с которыми садится.

.. literalinclude:: code/table_join.json

После того, как второй игрок садится, сервер делает отсчёт в 5 секунд и запускает игру.

Старт игры
====================================

В центрифугу прилетит ответ от сервера о начале игры:

**Ответ от сервера:**

.. literalinclude:: code/game_start.json

Ход игрока
====================================

Каждый игрок делает запрос "ход текущего игрока".

**Запрос к серверу:**

.. literalinclude:: code/game_move_req.json

**Ответ от сервера:**

.. literalinclude:: code/game_move_ans.json

Все игроки ходят по кругу.

Если игрок сбросил карты **flop**, то в ответе от сервера в **data.players** его уже не будет. Информация по нему будет только в инфе о ходе предыдущего игрока **data.game.prevMove**.

Когда последний игрок сделает ход - новый этап игры:

    * выкладываются новые карты на стол **data.board.cards**
    * фишки текущего этапа **data.bank.current** добавляются в общий банк **data.bank.total**
    * задаётся флаг о смене этапа игры **data.game.is_changed_stage**

Если в ответе есть **data.game.is_finish**, то данный ход был последним.

Тип **#card#** - строка вида "мастьзначение" (например, "CJ" / "H5" / "S10" / "DK").

Конец игры
====================================

Сразу после последнего хода в центрифугу прилетит сообщение о завершении игры с результатами.

**Ответ от сервера:**

.. literalinclude:: code/game_end.json

**Вариант поля "combination_type":**

    * ROYAL_FLUSH = 10;
    * STRAIGHT_FLUSH = 9;
    * FOUR_OF_A_KIND = 8;
    * FULL_HOUSE = 7;
    * FLUSH = 6;
    * STRAIGHT = 5;
    * THREE_OF_A_KIND = 4;
    * TWO_PAIR = 3;
    * PAIR = 2;
    * HIGH_CARD = 1;
